---
title: npm 包版本控制
tags:
  - npm
categories:
  - 工程化
date: 2020-10-29 14:09:33
modified: 2020-10-29 14:09:37
---

## 1、版本号

npm 的版本号由三部分组成：`主版本号`、`次版本号`、`补丁版本号`。变更不同的版本号，代表不同的意义：

- 主版本号（major）：软件做了不兼容的变更（breaking change 重大变更）；
- 次版本号（minor）：添加功能或者废弃功能，向下兼容；
- 补丁版本号（patch）：bug 修复，向下兼容。

有时候为了表达更加确切的版本，还会在版本号后面添加『**标签**』或者『**扩展**』，来说明是预发布版本或者测试版本等。比如 **3.2.3-beta-3**。

常见的标签有 :

|  标签  |     意义      | 补充                                                         |
| :----: | :-----------: | ------------------------------------------------------------ |
|  demo  |   demo版本    | 可能用于验证问题的版本                                       |
|  dev   |    开发版     | 开发阶段用的，bug 多，体积较大等特点，功能不完善             |
| alpha  |     α版本     | 用于内部交流或者测试人员测试，bug较多                        |
|  beta  | 测试版(β版本) | 较α版本，有较大的改进，但是还是有bug                         |
| gamma  | （γ）伽马版本 | 较α和β版本有很大的改进，与稳定版相差无几，用户可使用         |
| trial  |   试用版本    | 本软件通常都有时间限制，过期之后用户如果希望继续使用，一般得交纳一定的费用进行注册或购买。有些试用版软件还在功能上做了一定的限制。 |
| stable |    稳定版     |                                                              |
|  csp   | 内容安全版本  | js库常用                                                     |
| latest |   最新版本    | 不指定版本和标签，npm 默认安最新版                           |

[更多关于标签的内容](https://docs.npmjs.com/cli/dist-tag)

## 2、版本运算符

版本运算符指定了一定范围的版本。主要有**~**、**^**、**-**、**<**、**<=**、**>**、**>=**、**=**版本运算符。

### 1、~ 运算符 —— 指定主版本号或者次版本号相同

| 版本范围 |           匹配版本           |
| :------: | :--------------------------: |
|    ~3    | 3.x 或者 3.0.0 <= v < 4.0.0  |
|   ~3.1   | 3.1.x 或者 3.1.0 <= v <3.2.0 |
|  ~3.1.2  |      3.1.2 < v < 3.2.0       |

指定的版本范围含有预发布版本，只会匹配和完整版本号相同的预发布版本

### 2、^ 运算符 —— 第一个*非零* 版本号相同

| 版本范围 |      匹配版本      |             补充              |
| :------: | :----------------: | :---------------------------: |
|  ^3.1.5  | 3.1.5 <= v < 4.0.0 |                               |
|  ^0.3.6  | 0.3.6 <= v < 0.4.0 |                               |
|  ^0.0.2  | 0.0.2 <= v < 0.0.3 |                               |
|  ^3.x.x  | 3.0.0 <= v < 4.0.0 | 版本号缺少的位置，会被 0 填充 |
|  ^4.2.x  | 4.2.0 <= v < 4.3.0 |                               |

### 3、版本号比较器

| 版本范围 |       匹配版本        |
| :------: | :-------------------: |
|  <2.2.0  |   小于2.2.0 的版本    |
| <=2.0.0  | 小于等于 2.0.0 的版本 |
|  >4.2.0  |   大于4.2.0 的版本    |
| >=4.2.0  | 大于等于 4.2.0 的版本 |
|  =4.3.0  |   等于 4.3.0 的版本   |

## 3、~ vs ^

| 版本范围 |    含义     |     匹配的版本     | 说明               |
| :------: | :---------: | :----------------: | ------------------ |
|  ~3.3.0  | 与3.3.0相似 | 3.3.0 <= v < 3.4.0 | 主版本和次版本相同 |
|  ^3.3.0  | 与3.3.0兼容 |   3.3.0 <= v < 4   | 主版本相同         |

同一个版本号，^ 能匹配的范围大些，更加激进。